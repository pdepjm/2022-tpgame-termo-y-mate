import marvin.*
import wollok.game.*
import extras.*
import enemigos.*
import direcciones.*



//en verde 
describe "movimientos de Marvin" {
	
	test"Marvin se mueve para arriba"{
		marvin.moverse(arriba)
		assert.equals(game.at(1, 5), marvin.position())
	}
	test"Marvin se mueve para abajo"{
		marvin.moverse(abajo)
		assert.equals(game.at(1, 3), marvin.position())
	}
	test "Marvin se mueve para la derecha"{
		marvin.moverse(derecha)
		assert.equals(game.at(2, 4), marvin.position())
	}
	test "Marvin se mueve para la izquierda"{
		marvin.moverse(izquierda)
		assert.equals(game.at(0, 4), marvin.position())
	}
}

describe "habilidades de Marvin" {
	test "Marvin agarra una moneda" {
		const moneda = new Moneda(position = game.at(2,4))
		marvin.moverse(derecha)
		moneda.colisionadoPor() //comentando la linea 93 funciona sino hay aparece una exception "El componente visual no se encuentra en el tsblero"
		assert.equals(10, marvin.puntos())
	}
	
	test "Marvin agarra un corazon" {
		const corazon = new Corazon(position = game.at(2,4))
		marvin.moverse(derecha)
		corazon.colisionadoPor() //pasa lo mismo que en el test anterior, comentando la linea 115 funciona sino aparece el exception
		assert.equals(2, marvin.vidas())
	}
}

describe "enemigos"{
	test"cuando marvin choca con un enemigo muere"{
		const avion = new Avion(position = game.at(1,5))
		avion.colisionadoPor()
		assert.that(not marvin.estaVivo())
	}
	
}




















